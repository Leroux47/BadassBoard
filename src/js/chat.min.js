let msgID=0,msgAuthor="";Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},socket.on("username",t=>{msgAuthor=t,console.log(msgAuthor)}),socket.on("wallpaper",t=>{const a=()=>{if(!$(".backgroundMsg").length){$("<span></span>").addClass("msg reply backgroundMsg").text("Sorry, your background image couldn't be loaded... Maybe try another one").appendTo(".chatContainer__msgList__list")}$(".backgroundImage").css("backgroundImage","")};$.ajax({url:t,method:"GET",statusCode:{200:()=>{$(".backgroundImage").css("backgroundImage",`url(${t})`)},404:()=>{a()}}}).fail(t=>{"error"===t.statusText&&0===t.readyState&&a()})}),socket.on("bot avatar",t=>{const a=()=>{if(!$(".avatarMsg").length){$("<span></span>").addClass("msg reply avatarMsg").text("Sorry, my new avatar couldn't be loaded... Maybe try another one").appendTo(".chatContainer__msgList__list")}$(".chatContainer__botInfo__icon").attr("src","./src/scss/icons/interface/bot.png")};$.ajax({url:t,method:"GET",statusCode:{200:()=>{$(".chatContainer__botInfo__icon").attr("src",t)},404:()=>{a()}}}).fail(t=>{"error"===t.statusText&&0===t.readyState&&a()})}),$(".chatContainer__msgList__form").submit(t=>{t.preventDefault();let a=new Message;a.send(),console.log(a)}),$(".header__homeIcon").click(()=>{window.open("/","_self")}),showSettings();const Message=function(){this.author=msgAuthor,this.content=$(".chatContainer__msgList__form__inputMsg").val(),this.id=msgID,this.dateTime=new Date,this.send=function(){return new Promise((t,s)=>{if(null!==this.content&&""!==this.content){$("<span></span>").addClass("msg flex").text(this.content).appendTo(".chatContainer__msgList__list");socket.emit("chat msg",this),$(".chatContainer__msgList__form__inputMsg").val(""),msgID++,t(this)}else s(this)})}};socket.on("reply",e=>{e.add=function(){setTimeout(()=>{$("<span></span>").addClass("msg reply").append(e.content).appendTo(".chatContainer__msgList__list")},500)},e.addEmbed=function(){let t=$("<span></span>").addClass("msg reply embed");if(void 0!==e.content.title){let n=$("<div></div>").addClass("embed__fields");if(t.css("border-left","0.5em solid "+e.content.color).append(`<img src="${e.content.icon}" alt="${e.content.title} icon" class="embed__icon"/>`).append(`<a href="${e.content.url}" class="embed__title">${e.content.title}</a>`),void 0!==e.content.fields)for(const[d,i]of e.content.fields.entries()){$("<div></div>").addClass("embed__field").append(i).appendTo(n);d===e.content.fields.length-1&&t.append(n)}t.append(`<article class="embed__desc">${e.content.description}</article>`),void 0!==e.content.img&&t.append(`<img src="${e.content.img}" alt="${e.content.title} picture" class="embed__pic"/>`)}else t.text(e.content);t.appendTo(".chatContainer__msgList__list")},"wiki"!==e.theme&&"movie review"!==e.theme?e.add():e.addEmbed()});
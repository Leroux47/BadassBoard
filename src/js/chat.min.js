const socket=io();$.ajax({url:"./settings/settings.json",method:"GET",dataType:"json"}).done(e=>{if(void 0!==e.backgroundImage){const o=()=>{$(".msgContainer").text("Sorry, your background image couldn't be loaded... Maybe try another one"),fade(".msgContainer"),$(".backgroundImage").css("backgroundImage","")};$.ajax({url:e.backgroundImage,method:"GET",dataType:"",statusCode:{200:()=>{$(".backgroundImage").css("backgroundImage",`url(${e.backgroundImage})`)},404:()=>{o()}}}).fail(e=>{"error"===e.statusText&&0===e.readyState&&o()})}void 0!==e.owmToken&&(owmToken=e.owmToken)}),$(".msgContainer__msgList__form").submit(e=>{e.preventDefault(),(new Message).send()}),$(".header__homeIcon").click(()=>{window.open("/")});let msgID=0;const Message=function(){this.author="Max",this.content=$(".msgContainer__msgList__form__inputMsg").val(),this.id=msgID,this.dateTime=new Date,this.send=function(){return new Promise((t,s)=>{if(null!==this.content&&""!==this.content){$("<span></span>").addClass("msg flex").text(this.content).appendTo(".msgContainer__msgList__list");socket.emit("chat msg",this),$(".msgContainer__msgList__form__inputMsg").val(""),msgID++,t(this)}else s(this)})}};socket.on("reply",e=>{e.add=function(){setTimeout(()=>{$("<span></span>").addClass("msg reply").text(e.content).appendTo(".msgContainer__msgList__list")},500)},e.addEmbed=function(){setTimeout(()=>{$("<span></span>").addClass("msg reply embed").append(e.content).appendTo(".msgContainer__msgList__list")},500)},"embed"!==e.theme?e.add():e.addEmbed()});